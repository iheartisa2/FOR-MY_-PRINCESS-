<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iPhone Lyrics Pro - Luxury Pink Edition</title>
<style>
:root {
  --phone-w: 390px;
  --phone-h: 844px;
  --ios-blue: #007AFF;
  --ios-pink: #FF2D78;
  --bubble-gray: #262629;
}

* { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

body {
  height: 100vh;
  background: #000;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* Phone Frame */
.phone {
  width: var(--phone-w);
  height: var(--phone-h);
  background: #000;
  border-radius: 54px;
  border: 11px solid #1f1f1f;
  position: relative;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 0 120px rgba(255, 45, 120, 0.15);
  transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Luxury Neon Border Trigger */
.love-active {
  border-color: var(--ios-pink) !important;
  box-shadow: 0 0 40px var(--ios-pink), inset 0 0 20px var(--ios-pink);
  transform: scale(1.03);
}

/* Status Bar */
.status-bar {
  position: absolute;
  top: 14px;
  width: 100%;
  padding: 0 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  font-weight: 600;
  color: white;
  z-index: 110;
}

.status-right { display: flex; gap: 5px; align-items: center; }

.dynamic-island {
  position: absolute;
  top: 11px; left: 50%;
  transform: translateX(-50%);
  width: 120px; height: 36px;
  background: #000;
  border-radius: 20px;
  z-index: 100;
}

/* iOS Header */
.header {
  padding: 60px 16px 12px;
  background: rgba(18, 18, 18, 0.7);
  backdrop-filter: blur(40px) saturate(180%);
  -webkit-backdrop-filter: blur(40px) saturate(180%);
  display: flex;
  flex-direction: column;
  align-items: center;
  border-bottom: 0.5px solid rgba(255,255,255,0.1);
  z-index: 50;
}

.nav-bar {
  position: absolute;
  top: 70px; width: 100%;
  padding: 0 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.avatar {
  width: 48px; height: 48px;
  border-radius: 50%;
  background: #333 url('test.png') center/cover;
  margin-bottom: 4px;
  border: 1px solid rgba(255,255,255,0.1);
}

.contact-name b { color: #fff; font-size: 13px; font-weight: 600; letter-spacing: -0.2px; }

/* Heart Particles */
.heart {
  position: absolute;
  pointer-events: none;
  color: var(--ios-pink);
  font-size: 18px;
  z-index: 1000;
  animation: floatHeart 2s ease-out forwards;
}

@keyframes floatHeart {
  0% { transform: translateY(0) scale(0) rotate(0deg); opacity: 1; }
  20% { transform: translateY(-20px) scale(1.2) rotate(15deg); }
  100% { transform: translateY(150px) scale(0) rotate(-45deg); opacity: 0; }
}

/* Messages */
.chat {
  flex: 1;
  padding: 16px 12px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  overflow-y: auto;
  scrollbar-width: none;
}
.chat::-webkit-scrollbar { display: none; }

.bubble {
  max-width: 72%;
  padding: 10px 16px;
  border-radius: 20px;
  font-size: 17px;
  line-height: 1.35;
  color: #fff;
  background: var(--bubble-gray);
  opacity: 0;
  transform: translateY(10px) scale(0.95);
  transition: all 0.4s cubic-bezier(0.15, 1, 0.3, 1.1);
  align-self: flex-start;
}

.bubble.active { opacity: 1; transform: translateY(0) scale(1); }

.bubble.love-bubble {
  background: linear-gradient(135deg, #FF2D78 0%, #FF85A1 100%);
  font-weight: 600;
  box-shadow: 0 0 25px rgba(255, 45, 120, 0.4);
  animation: glowPulse 1.5s infinite alternate;
}

@keyframes glowPulse {
  from { transform: scale(1); }
  to { transform: scale(1.03); }
}

/* Footer */
.footer {
  padding: 10px 14px 34px;
  background: rgba(18, 18, 18, 0.85);
  backdrop-filter: blur(40px) saturate(180%);
  display: flex;
  align-items: center;
  gap: 12px;
}

.input-pill {
  flex: 1; height: 38px;
  border: 1px solid #333;
  border-radius: 20px;
  padding: 0 15px;
  color: #888;
  font-size: 16px;
  display: flex; align-items: center;
}

.svg-icon { fill: #8e8e93; width: 24px; height: 24px; }
.svg-blue { fill: var(--ios-blue); width: 28px; height: 28px; }

#overlay {
  position: absolute; inset: 0; background: #000; z-index: 200;
  display: flex; justify-content: center; align-items: center;
}
</style>
</head>
<body>

<div class="phone" id="mainPhone">
  <div class="status-bar">
    <div class="time" id="currentTime">9:41</div>
    <div class="status-right">
      <svg width="18" height="12" fill="white"><path d="M2 10h1v1H2v-1zm3-2h1v3H5V8zm3-2h1v5H8V6zm3-2h1v7h-1V4z"/></svg>
      <svg width="16" height="16" fill="white" viewBox="0 0 24 24"><path d="M12 21l-12-18h24z"/></svg>
      <svg width="25" height="12" fill="white"><rect x="1" y="1" width="20" height="10" rx="2" stroke="white" stroke-width="1" fill="none"/><rect x="3" y="3" width="14" height="6" rx="1" fill="white"/><path d="M22 4v4" stroke="white" stroke-width="2"/></svg>
    </div>
  </div>

  <div class="dynamic-island"></div>
  
  <div class="header">
    <div class="nav-bar">
      <svg class="svg-blue" style="width:20px" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      <div style="display:flex; gap:15px">
        <svg class="svg-blue" style="width:24px" viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg>
        <svg class="svg-blue" style="width:24px" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
      </div>
    </div>
    <div class="avatar"></div>
    <div class="contact-name"><b>MY HANDSOME BOYYðŸ’ŒðŸŽ€</b></div>
  </div>

  <div class="chat" id="chat"></div>

  <div class="footer">
    <svg class="svg-blue" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>
    <div class="input-pill">iMessage</div>
    <svg class="svg-icon" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>
  </div>

  <div id="overlay">
    <button style="background:#fff; border:none; padding:15px 45px; border-radius:30px; font-weight:800; cursor:pointer;" onclick="run()">Open Message</button>
  </div>
</div>

<audio id="audio" src="test.mp3"></audio>

<script>
const audio = document.getElementById('audio');
const chat = document.getElementById('chat');
const phone = document.getElementById('mainPhone');
let cues = [];
let currentIndex = -1;

// Set actual time
const updateTime = () => {
    const now = new Date();
    document.getElementById('currentTime').innerText = now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0');
}
updateTime();

async function run() {
  document.getElementById('overlay').style.display = 'none';
  const res = await fetch('test.srt');
  const text = await res.text();
  parseSRT(text);
  audio.play();
  sync();
}

function parseTime(t) {
  const [hms, ms] = t.split(',');
  const [h, m, s] = hms.split(':');
  return +h * 3600 + +m * 60 + +s + (+ms / 1000);
}

function parseSRT(data) {
  const blocks = data.trim().split(/\n\s*\n/);
  cues = blocks.map(b => {
    const lines = b.split('\n');
    const timeLine = lines.find(l => l.includes(' --> '));
    return {
      start: parseTime(timeLine.split(' --> ')[0]),
      text: lines.slice(lines.indexOf(timeLine) + 1).join(' ')
    };
  });
}

function spawnHearts(x, y) {
  for (let i = 0; i < 12; i++) {
    setTimeout(() => {
      const h = document.createElement('div');
      h.className = 'heart';
      h.innerHTML = 'ðŸ’—';
      h.style.left = (x + (Math.random() * 60 - 30)) + 'px';
      h.style.top = (y + (Math.random() * 20 - 10)) + 'px';
      phone.appendChild(h);
      setTimeout(() => h.remove(), 2000);
    }, i * 50);
  }
}

function addBubble(text) {
  document.querySelectorAll('.bubble').forEach(b => b.style.opacity = '0.3');

  const isLove = text.toLowerCase().includes("i love");
  const b = document.createElement('div');
  b.className = `bubble ${isLove ? 'love-bubble' : ''}`;
  b.textContent = text;
  chat.appendChild(b);

  if (isLove) {
    phone.classList.add('love-active');
    const rect = b.getBoundingClientRect();
    spawnHearts(rect.left + 40, rect.top + 20);
    setTimeout(() => phone.classList.remove('love-active'), 1800);
  }

  requestAnimationFrame(() => b.classList.add('active'));
  chat.scrollTo({ top: chat.scrollHeight, behavior: 'smooth' });
}

function sync() {
  const now = audio.currentTime;
  for (let i = 0; i < cues.length; i++) {
    if (now >= cues[i].start && currentIndex < i) {
      currentIndex = i;
      addBubble(cues[i].text);
    }
  }
  if (!audio.paused) requestAnimationFrame(sync);
}
</script>
</body>
</html>
